# Gsou - Sing-box VPN å®¢æˆ·ç«¯

ä¸€ä¸ªåŸºäº Flutter å¼€å‘çš„ç°ä»£åŒ– sing-box VPN å®¢æˆ·ç«¯ï¼Œæ”¯æŒ Windows å¹³å°ã€‚

## é¡¹ç›®ç®€ä»‹

Gsou æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ VPN å®¢æˆ·ç«¯åº”ç”¨ï¼ŒåŸºäº sing-box æ ¸å¿ƒæ„å»ºï¼Œæä¾›ç®€æ´ç¾è§‚çš„ç”¨æˆ·ç•Œé¢å’Œä¸°å¯Œçš„åŠŸèƒ½ç‰¹æ€§ã€‚

### ä¸»è¦ç‰¹æ€§

- ğŸš€ **ç°ä»£åŒ– UI**: åŸºäº Flutter æ„å»ºï¼Œæ”¯æŒ Windows å¹³å°
- ğŸ¯ **ç³»ç»Ÿæ‰˜ç›˜æ”¯æŒ**: åå°è¿è¡Œï¼Œç³»ç»Ÿæ‰˜ç›˜å¿«é€Ÿè®¿é—®
- ğŸŒ **å¤šåè®®æ”¯æŒ**: æ”¯æŒå¤šç§ä»£ç†åè®®å’Œé…ç½®æ ¼å¼
- ğŸ”§ **çµæ´»é…ç½®**: æ”¯æŒå¯¼å…¥é…ç½®æ–‡ä»¶å’ŒäºŒç»´ç æ‰«æ
- âš¡ **é«˜æ€§èƒ½**: åŸºäº sing-box æ ¸å¿ƒï¼Œæ€§èƒ½ä¼˜å¼‚

## ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Flutter SDK**: >=3.9.2
- **å¼€å‘å·¥å…·**: Visual Studio Code / IntelliJ IDEA

## ä¸»è¦ä¾èµ–

### æ ¸å¿ƒä¾èµ–
- `flutter`: Flutter SDK
- `cupertino_icons`: ^1.0.8 - iOS é£æ ¼å›¾æ ‡

### UI ä¸çª—å£ç®¡ç†
- `system_tray`: ^2.0.3 - ç³»ç»Ÿæ‰˜ç›˜æ”¯æŒ
- `window_manager`: ^0.4.3 - çª—å£ç®¡ç†
- `flutter_acrylic`: ^1.1.3 - çª—å£ç‰¹æ•ˆä¸é€æ˜åº¦

### çŠ¶æ€ç®¡ç†ä¸å­˜å‚¨
- `provider`: ^6.1.2 - çŠ¶æ€ç®¡ç†
- `shared_preferences`: ^2.3.3 - æœ¬åœ°å­˜å‚¨

### æ–‡ä»¶ä¸ç½‘ç»œ
- `file_picker`: ^8.1.4 - æ–‡ä»¶é€‰æ‹©
- `http`: ^1.2.2 - HTTP è¯·æ±‚
- `json_annotation`: ^4.9.0 - JSON åºåˆ—åŒ–

### ç³»ç»Ÿé›†æˆ
- `process_run`: ^1.2.0 - è¿›ç¨‹ç®¡ç†
- `path_provider`: ^2.1.5 - è·¯å¾„å¤„ç†
- `path`: ^1.9.0 - è·¯å¾„å·¥å…·

### å›¾åƒå¤„ç†
- `image`: ^4.2.0 - å›¾åƒå¤„ç†
- `zxing2`: ^0.2.4 - äºŒç»´ç è§£æ

### ç³»ç»Ÿ API
- `ffi`: ^2.1.0 - FFI æ”¯æŒ
- `win32`: ^5.5.4 - Windows API ä¸æ³¨å†Œè¡¨
- `yaml`: ^3.1.2 - YAML è§£æ

## å®‰è£…ä¸ä½¿ç”¨

### å¼€å‘ç¯å¢ƒæ­å»º

1. **å®‰è£… Flutter SDK**
   ```bash
   # ç¡®ä¿ Flutter SDK ç‰ˆæœ¬ >=3.9.2
   flutter --version
   ```

2. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd sing_box_vpn
   ```

3. **å®‰è£…ä¾èµ–**
   ```bash
   flutter pub get
   ```

4. **ç¼–è¯‘è¿è¡Œ**
   ```bash
   # è°ƒè¯•æ¨¡å¼è¿è¡Œ
   flutter run -d windows

   # å‘å¸ƒç‰ˆæœ¬ç¼–è¯‘
   flutter build windows --release
   ```

### ç¼–è¯‘ sing-box DLL

é¡¹ç›®æ”¯æŒä½¿ç”¨æœ¬åœ° sing-tun æºç ç¼–è¯‘ sing-box DLLï¼š

1. **è‡ªåŠ¨ç¼–è¯‘**ï¼ˆæ¨èï¼‰
   ```powershell
   # å®Œæ•´ç¼–è¯‘
   .\build_all.ps1

   # ä»…ç¼–è¯‘ DLLï¼ˆè·³è¿‡ Flutterï¼‰
   .\build_all.ps1 -SkipFlutter
   ```

2. **ä½¿ç”¨ Dart è„šæœ¬**
   ```bash
   dart run tools/prebuild.dart --force
   ```

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒï¼š[LOCAL_SING_TUN_USAGE.md](LOCAL_SING_TUN_USAGE.md)

## é¡¹ç›®ç»“æ„

```
sing_box_vpn/
â”œâ”€â”€ lib/                    # Flutter åº”ç”¨æºç 
â”‚   â”œâ”€â”€ main.dart          # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ providers/         # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ screens/           # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ services/          # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ theme/             # ä¸»é¢˜é…ç½®
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ widgets/           # UI ç»„ä»¶
â”œâ”€â”€ assets/                # èµ„æºæ–‡ä»¶
â”œâ”€â”€ native/                # Go native ä»£ç 
â”œâ”€â”€ tools/                 # æ„å»ºå·¥å…·
â”œâ”€â”€ windows/               # Windows å¹³å°ç‰¹å®šä»£ç 
â”œâ”€â”€ build_all.ps1         # PowerShell æ„å»ºè„šæœ¬
â””â”€â”€ pubspec.yaml          # é¡¹ç›®é…ç½®æ–‡ä»¶
```

## å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ
- éµå¾ª Flutter å®˜æ–¹ä»£ç è§„èŒƒ
- ä½¿ç”¨ `flutter_lints` è¿›è¡Œä»£ç æ£€æŸ¥
- ä¿æŒä»£ç æ•´æ´å’Œè‰¯å¥½çš„æ³¨é‡Š

### æ„å»ºæµç¨‹
1. **é¢„æ„å»º**: å¤„ç† native ä»£ç å’Œä¾èµ–
2. **èµ„æºå¤„ç†**: å¤„ç†å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æºæ–‡ä»¶
3. **ç¼–è¯‘**: Flutter åº”ç”¨ç¼–è¯‘
4. **æ‰“åŒ…**: ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶

### è°ƒè¯•æŠ€å·§
- ä½¿ç”¨ `flutter logs` æŸ¥çœ‹è¿è¡Œæ—¥å¿—
- ä½¿ç”¨ `flutter inspector` è°ƒè¯• UI
- æŸ¥çœ‹ `gsou_daemon.log` äº†è§£åå°æœåŠ¡çŠ¶æ€

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥å¸®åŠ©æ”¹è¿›é¡¹ç›®ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ªç›¸åº”çš„å¼€æºè®¸å¯è¯ï¼Œå…·ä½“è¯·æŸ¥çœ‹é¡¹ç›®ä¸­çš„è®¸å¯è¯æ–‡ä»¶ã€‚

## æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£å’Œå¸¸è§é—®é¢˜
2. æœç´¢å·²æœ‰çš„ Issue
3. åˆ›å»ºæ–°çš„ Issue æè¿°é—®é¢˜

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„ã€‚